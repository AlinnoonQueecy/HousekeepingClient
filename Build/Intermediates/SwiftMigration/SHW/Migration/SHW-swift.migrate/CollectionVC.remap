[
 {
  "file": "/Users/zhang/Desktop/HouseKeeping 2/SHW/CollectionVC.swift",
  "offset": 741,
  "remove": 6658,
  "text": "let width = self.view.frame.width\n            //读取用户信息，如果不是第一次登录，则会自动登录\n            readNSUerDefaults()\n  \n            CollectTable.dataSource = self\n            CollectTable.delegate = self\n \n            ServantData = refreshSCollection(customerid) as [ServantInfo]\n            \n       \n            //实例化导航条\n            navigationBar = UINavigationBar(frame: CGRectMake(0, 0, width, 64))\n            self.view.addSubview(navigationBar!)\n            print(\"创建导航条详情\")\n            onMakeNavitem()\n    \n            \n        }\n        \n        override func viewDidLayoutSubviews() {\n            let width = self.view.frame.width\n           \n\n            CollectTable.frame =  CGRectMake(0, 64, width, self.view.frame.height-100)\n    }\n \n        override func didReceiveMemoryWarning() {\n            super.didReceiveMemoryWarning()\n            // Dispose of any resources that can be recreated.\n        }\n        \n        //-------------------Table view data source-----------------------------\n        // 根据indexPath(section,row)创建每行cell及其内容\n        func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCell {\n            print(\"显示列表\")\n            //创建cell\n            let cell = tableView.dequeueReusableCellWithIdentifier(\"CollectCell\", forIndexPath: indexPath) as! CollectCell\n            \n            let collect = ServantData[indexPath.row] as ServantInfo\n                cell.facilitatorName.text = \"人员姓名:\\(collect.servantName)\"\n                cell.itemName.text = \"服务项目:\\(collect.serviceItems) \"\n                cell.servicePay.text = \"服务次数:\\(collect.serviceCount)次\"\n                //网络地址获取图片\n                //1.定义一个地址字符串常量\n               let imageUrlString:String = HttpData.http+\"/NationalService/\\(collect.headPicture)\"\n//                //2.通过String类型，转换NSUrl对象\n                let url:NSString = imageUrlString.URLEncodedString()\n                  cell.picture.setZYHWebImage(url as String, defaultImage: \"reserve2.jpg\")\n            \n            return cell\n      }\n    \n        \n        //导航条详情\n        func reply (){\n            self.dismissViewControllerAnimated(true, completion: nil)\n        }\n        \n        func onMakeNavitem() -> UINavigationItem{\n            print(\"创建导航条step1\")\n            //创建一个导航项\n            let navigationItem = UINavigationItem()\n            //创建左边按钮\n            let leftButton =  UIBarButtonItem(barButtonSystemItem: UIBarButtonSystemItem.Reply, target: self, action: \"reply\")\n            //var leftButton =  UIBarButtonItem(title: \"返回\", style: UIBarButtonItemStyle.Bordered, target: self, action: \"reply\")\n            //导航栏的标题\n            navigationItem.title = \"收藏列表\"\n            //设置导航栏左边按钮\n            navigationItem.setLeftBarButtonItem(leftButton, animated: true)\n            navigationBar?.pushNavigationItem(navigationItem, animated: true)\n            return navigationItem\n        }\n        \n    \n       // Return the number of sections.\n        func numberOfSectionsInTableView(tableView: UITableView) -> Int {\n            return 1;\n        }\n        \n        // Return the number of rows in the section.\n        func tableView(tableView: UITableView, numberOfRowsInSection section: Int) -> Int {\n          \n            var  count = 0\n            \n            //返回人员数量作为表格的行数\n            count = ServantData.count;\n            return count\n\n            }\n    \n        //    func tableView(tableView: UITableView, titleForHeaderInSection section: Int) -> String? {\n        //        return \"\";//HttpData.channelTitles[section]\n        //    }\n    \n    \n   // 滑动删除必须实现的方法\n    \n    //Override to support editing the table view.\n     func tableView(tableView: UITableView, commitEditingStyle editingStyle: UITableViewCellEditingStyle, forRowAtIndexPath indexPath: NSIndexPath) {\n        if editingStyle == .Delete {\n            //Delete the row from the data source\n            print(\"删除\\(indexPath.row)\")\n            \n            \n            var response = deleteSCollection(customerid, servantID: ServantData[indexPath.row].servantID)\n            if response == \"Success\" {\n            ServantData.removeAtIndex(indexPath.row)\n            self.CollectTable.deleteRowsAtIndexPaths([indexPath], withRowAnimation:UITableViewRowAnimation.Left)\n            }else {\n                let alert =  UIAlertView(title: \"删除失败\", message: \"请重试\", delegate: self, cancelButtonTitle: \"确定\")\n                alert.show()\n            }\n            \n            print(\"删\\(indexPath.row)\")\n            \n        } else if editingStyle == .Insert {\n            //Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view\n        }\n    }\n    \n    //滑动删除\n    func tableView(tableView: UITableView, editingStyleForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCellEditingStyle {\n        return UITableViewCellEditingStyle.Delete\n    }\n    //修改删除按钮的文字\n     func  tableView(tableView: UITableView, titleForDeleteConfirmationButtonForRowAtIndexPath indexPath: NSIndexPath) -> String! {\n        return \"取消收藏\"\n    }\n    \n\n \n    \n\n    \n        //-------------------Table view\n  \n    //cell响应事件\n    func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath) {\n       \n            print(\"去人员详情1\")\n            self.performSegueWithIdentifier(\"toSDetail\", sender: self)\n            print(\"去人员详情\")\n       \n        \n    }\n\n    \n    \n    //从NSUerDefaults 中读取数据\n    func readNSUerDefaults () {\n        \n        let userDefaultes = NSUserDefaults.standardUserDefaults()\n        if  (userDefaultes.stringForKey(\"customerID\")) != nil && (userDefaultes.stringForKey(\"loginPassword\")) != nil{\n            customerid = userDefaultes.stringForKey(\"customerID\")!\n            loginPassword = userDefaultes.stringForKey(\"loginPassword\")!\n            \n        }\n        \n    }\n\n    override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) {\n        if segue.identifier==\"toSDetail\"{\n            if let indexPath = self.CollectTable.indexPathForSelectedRow{\n                let  object = ServantData[indexPath.row]\n                print(\"到人员详情\")\n                (segue.destinationViewController as! workerViewController).workerdetail = object\n                print",
 }
]
