[
 {
  "file": "/Users/zhang/Desktop/HouseKeeping 2/SHW/MainVCdata.swift",
  "offset": 676,
  "remove": 10717,
  "text": "let url: NSURL! = NSURL(string:HttpData.http+\"/NationalService/MobileServiceTypeAction?operation=_query\")\n    \n    let request:NSMutableURLRequest = NSMutableURLRequest(URL:url, cachePolicy:NSURLRequestCachePolicy.UseProtocolCachePolicy,timeoutInterval: 10)\n    \n    request.HTTPMethod = \"POST\"\n    \n    let param:String = \"{\\\"typeName\\\":\\\"\\(select)\\\"}\"\n    print(\"typeName\\(select)\")\n    let data:NSData = param.dataUsingEncoding(NSUTF8StringEncoding, allowLossyConversion: true)!\n    request.HTTPBody = data;\n    var response:NSURLResponse?\n    var error:NSError?\n    var receiveData:NSData?\n    do {\n        receiveData = try NSURLConnection.sendSynchronousRequest(request, returningResponse: &response)\n    } catch let error1 as NSError {\n        error = error1\n        receiveData = nil\n    }\n    if (error != nil)\n    {\n        print(error?.code)\n        print(error?.description)\n        \n    }\n    else\n    {\n        let jsonString = NSString(data:receiveData!, encoding: NSUTF8StringEncoding)\n        print(jsonString)\n        \n    }\n    \n    let json:AnyObject! = try? NSJSONSerialization.JSONObjectWithData(receiveData!, options: NSJSONReadingOptions.AllowFragments)\n    \n    let test1: AnyObject?=json.objectForKey(\"serverResponse\")\n    var ServiceTypeData:[String] = []\n    let serverResponse:String = test1 as! String\n    if serverResponse == \"Success\" {\n        let test2: AnyObject = json!.objectForKey(\"data\")!\n        let jsonArray = test2 as? NSArray\n        var count = jsonArray?.count\n        \n        for value in jsonArray!{\n            let typeName:String=value.objectForKey(\"typeName\") as! String\n            ServiceTypeData += [typeName]\n        \n        }\n    }\n     print(\"ServiceTypeData\\(ServiceTypeData[0])\")\n    return ServiceTypeData\n   \n    \n}\n\n\n//根据父类查询子类(A)\nfunc refreshServiceType(select:String) ->NSArray  {\n    let url: NSURL! = NSURL(string:HttpData.http+\"/NationalService/MobileServiceTypeAction?operation=_query\")\n    \n    let request:NSMutableURLRequest = NSMutableURLRequest(URL:url, cachePolicy:NSURLRequestCachePolicy.UseProtocolCachePolicy,timeoutInterval: 10)\n    \n    request.HTTPMethod = \"POST\"\n  \n    let param:String = \"{\\\"typeName\\\":\\\"\\(select)\\\"}\"\n    print(\"typeName\\(select)\")\n    let data:NSData = param.dataUsingEncoding(NSUTF8StringEncoding, allowLossyConversion: true)!\n    request.HTTPBody = data;\n    var response:NSURLResponse?\n    var error:NSError?\n    var receiveData:NSData?\n    do {\n        receiveData = try NSURLConnection.sendSynchronousRequest(request, returningResponse: &response)\n    } catch let error1 as NSError {\n        error = error1\n        receiveData = nil\n    }\n    if (error != nil)\n    {\n        print(error?.code)\n        print(error?.description)\n      \n    }\n    else\n    {\n        let jsonString = NSString(data:receiveData!, encoding: NSUTF8StringEncoding)\n        print(jsonString)\n        \n    }\n    \n    let json:AnyObject! = try? NSJSONSerialization.JSONObjectWithData(receiveData!, options: NSJSONReadingOptions.AllowFragments)\n   \n    let test1: AnyObject?=json.objectForKey(\"serverResponse\")\n    var ServiceTypeData:[ServiceType] = []\n    let serverResponse:String = test1 as! String\n    if serverResponse == \"Success\" {\n    let test2: AnyObject = json.objectForKey(\"data\")!\n    let jsonArray = test2 as? NSArray\n    var count = jsonArray?.count\n    \n    for value in jsonArray!{\n        \n        let id:Int=value.objectForKey(\"id\") as! Int\n        let typeName:String=value.objectForKey(\"typeName\") as! String\n        let typeIntro:String=value.objectForKey(\"typeIntro\") as! String\n        let typeLogo:String=value.objectForKey(\"typeLogo\") as! String\n     \n        let parentId:Int=value.objectForKey(\"parentId\") as! Int\n       \n        \n        let obj:ServiceType=ServiceType(id:id,typeName:typeName,typeIntro:typeIntro,typeLogo:typeLogo,parentId:parentId )\n      \n        ServiceTypeData += [obj]\n//        println(obj)\n        \n        \n    }\n    }\n    return ServiceTypeData\n    \n}\n\n\n\n//根据子类名称得到其详情\n//func getServiceType(select:String) ->ServiceType{\n//    println(\"chaxunzileixiangqing\")\n//    //要改URL\n//    var url: NSURL! = NSURL(string:HttpData.http+\"/FamilyServiceSystem/MobileServiceTypeAction?operation=_queryByName\")\n//    \n//    var request:NSMutableURLRequest = NSMutableURLRequest(URL:url, cachePolicy:NSURLRequestCachePolicy.UseProtocolCachePolicy,timeoutInterval: 10)\n//    \n//    request.HTTPMethod = \"POST\"\n//    \n//    var param:String = \"{\\\"typeName\\\":\\\"\\(select)\\\"}\"\n//    println(\"typeName\\(select)\")\n//    var data:NSData = param.dataUsingEncoding(NSUTF8StringEncoding, allowLossyConversion: true)!\n//    request.HTTPBody = data;\n//    var response:NSURLResponse?\n//    var error:NSError?\n//    var receiveData:NSData? = NSURLConnection.sendSynchronousRequest(request, returningResponse: &response, error: &error)\n//    if (error != nil)\n//    {\n//        println(error?.code)\n//        println(error?.description)\n//        \n//    }\n//    else\n//    {\n//        var jsonString = NSString(data:receiveData!, encoding: NSUTF8StringEncoding)\n//        println(\"jsonString\\(jsonString)\")\n//        \n//    }\n//    \n//    let json:AnyObject! = NSJSONSerialization.JSONObjectWithData(receiveData!, options: NSJSONReadingOptions.AllowFragments, error: nil)\n// \n//    var test1: AnyObject?=json.objectForKey(\"serverResponse\")\n//    var ServiceTypeData:ServiceType?\n//    var serverResponse:String = test1 as! String\n//    \n//    if serverResponse == \"Success\" {\n//        var value: AnyObject = json.objectForKey(\"data\")!\n//      \n//            println(\"serverResponse\\(serverResponse)\")\n//            var id:Int=value.objectForKey(\"id\") as! Int\n//            println(\"id\\(id)\")\n//\n//            var typeName:String=value.objectForKey(\"typeName\") as! String\n//            var typeIntro:String=value.objectForKey(\"typeIntro\") as! String\n//            var typeLogo:String=value.objectForKey(\"typeLogo\") as! String\n//            var isPerson:String=value.objectForKey(\"isPerson\") as! String\n//            var parentId:Int=value.objectForKey(\"parentId\") as! Int\n//            \n//            \n//            let obj:ServiceType=ServiceType(id: id,typeName:typeName,typeIntro:typeIntro,typeLogo:typeLogo,isPerson:isPerson,parentId:parentId )\n//            \n//            ServiceTypeData = obj\n//            //        println(obj)\n//            \n//       \n//    }\n//    return ServiceTypeData!\n//\n//}\n//\n\n\n\n\n\n\nclass  HomeAdvertise:NSObject{\n    var id:Int\n    var contactName:String\n    var contactNo:String\n    var emailAddress:String\n    var advertiseType:String\n    \n    \n    var orderDate:String\n    var startDate:String\n    var endDate:String\n    \n    var advertiseTopic:String\n    var advertiseIntro:String\n    var advertisePicture:String\n  \n    init(id :Int,contactName:String,contactNo:String,emailAddress:String,advertiseType:String,orderDate:String,startDate:String,endDate:String ,advertiseTopic:String,advertiseIntro:String,advertisePicture:String  ){\n        self.id = id\n        self.contactName = contactName\n        self.contactNo = contactNo\n        self.emailAddress = emailAddress\n        self.advertiseType = advertiseType\n        \n        self.orderDate = orderDate\n        self.startDate = startDate\n        self.endDate = endDate\n        \n        self.advertiseTopic = advertiseTopic\n        self.advertiseIntro = advertiseIntro\n        self.advertisePicture = advertisePicture\n        \n        super.init()\n    }\n    \n}\n//广告数据查询\nfunc refreshAdvertise() ->NSArray  {\n \n    \n    //创建NSURL\n    let url: NSURL! = NSURL(string: HttpData.http+\"/NationalService/MobileFacilitatorAdvertiseAction?operation=_query\")\n    print(\"url:\\(url)\")\n    //创建请求对象\n    let request:NSMutableURLRequest = NSMutableURLRequest(URL:url, cachePolicy:NSURLRequestCachePolicy.UseProtocolCachePolicy,timeoutInterval: 10)\n    //响应对象\n    var response:NSURLResponse?\n    //错误对象\n    var error:NSError?\n    //发出请求\n    var data:NSData?\n    do {\n        data = try NSURLConnection.sendSynchronousRequest(request, returningResponse: &response)\n    } catch let error1 as NSError {\n        error = error1\n        data = nil\n    }\n    \n    if (error != nil)\n    {\n        print(error?.code)\n        print(error?.description)\n    }\n    else\n    {\n        let jsonString = NSString(data:data!, encoding: NSUTF8StringEncoding)\n        \n          print(\"jsonString\\(jsonString)\")\n        \n    }\n\n    let json: AnyObject? = try? NSJSONSerialization.JSONObjectWithData(data!, options: NSJSONReadingOptions.AllowFragments)\n    print(\"json\\(json)\")\n    let test1: AnyObject?=json?.objectForKey(\"serverResponse\")\n    let serverResponse:String = test1 as! String\n    var AdvertiseData:[HomeAdvertise] = []\n    \n    if serverResponse == \"Success\" {\n    let test2: AnyObject?=json?.objectForKey(\"data\")\n    let jsonArray = test2 as? NSArray\n    var count = jsonArray?.count\n    \n    print(\"dsvcqgrdbwvr\")\n    for value in jsonArray!{\n        \n        let id:Int=value.objectForKey(\"id\") as! Int\n        let contactName:String=value.objectForKey(\"contactName\") as! String\n        let contactNo:String=value.objectForKey(\"contactNo\") as! String\n        let emailAddress:String=value.objectForKey(\"emailAddress\") as! String\n        let advertiseType:String=value.objectForKey(\"advertiseType\") as! String\n        \n        \n        let orderDate:String=value.objectForKey(\"orderDate\") as! String\n        let startDate:String=value.objectForKey(\"startDate\") as! String\n        let endDate:String=value.objectForKey(\"endDate\") as! String\n        \n        let advertiseTopic:String=value.objectForKey(\"advertiseTopic\") as! String\n        let advertiseIntro:String=value.objectForKey(\"advertiseIntro\") as! String\n        let advertisePicture:String=value.objectForKey(\"advertisePicture\") as! String\n        \n        let obj:HomeAdvertise=HomeAdvertise(id :id,contactName:contactName,contactNo:contactNo,emailAddress:emailAddress,advertiseType:advertiseType,orderDate:orderDate,startDate:startDate,endDate:endDate ,advertiseTopic:advertiseTopic,advertiseIntro:advertiseIntro,advertisePicture:advertisePicture)\n        \n           AdvertiseData += [obj]\n        \n        print(AdvertiseData)\n        \n       }\n    }\n    return AdvertiseData\n    \n}\n\n\n\nfunc getImageData(url:String?)->NSData?{\n    \n    var dataA:NSData?\n \n        let data:NSData?=ZYHWebImageChcheCenter.readCacheFromUrl(url!)\n    \n        if data != nil {\n            dataA = data\n            print(\"直接读缓存\")\n            \n        }else{\n         \n            let URL:NSURL = NSURL(string:url!)!\n            let data:NSData?=NSData(contentsOfURL: URL)\n            \n            if data != nil {\n                \n                dataA = data\n                //写缓存\n                print(\"写缓存1\")\n                ZYHWebImageChcheCenter.writeCacheToUrl(url!, data: data!)\n                \n            }\n        }\n    \n    print",
 }
]
